{"version":3,"sources":["index.js","context/wx.js","context/my.js","util.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;AELA,ADGA,ADGA;AELA,ADGA,ADGA;AELA,ADGA,ADGA;AELA,ADGA,ADGA,AGTA;ADIA,ADGA,ADGA,AGTA;ADIA,ADGA,ADGA,AGTA;ADIA,ADGA,ADGA,AGTA;ADIA,ADGA,ADGA,AGTA;ADIA,ADGA,ADGA,AGTA;ADIA,ADGA,ADGA,AGTA;ADIA,ADGA,ADGA,AGTA;ADIA,ADGA,ADGA,AGTA;ADIA,ADGA,AENA;ADIA,ADGA,AENA;ADIA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar wx_1 = require(\"./context/wx\");\nexports.wx = wx_1.default;\nvar my_1 = require(\"./context/my\");\nexports.my = my_1.default;\nvar util_1 = require(\"./util\");\nvar auto = function (ctx) {\n    if (util_1.isWx) {\n        return wx_1.default(ctx);\n    }\n    if (util_1.isMy) {\n        return my_1.default(ctx);\n    }\n    return ctx;\n};\nexports.auto = auto;\n","\n// 微信程序的context适配\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CAPITALIZED_ATTRS_MAP = {\n    fontSize: 'FontSize',\n    opacity: 'GlobalAlpha',\n    lineDash: 'LineDash',\n    textAlign: 'TextAlign',\n};\n/**\n * wxapp textAlign align 可选值为 left|center|right\n * 标准canvas textAlign align 可选值为 left|center|right|start|end\n */\nvar TEXT_ALIGN_MAP = {\n    start: 'left',\n    end: 'right',\n};\nexports.default = (function (ctx) {\n    Object.keys(CAPITALIZED_ATTRS_MAP).map(function (style) {\n        Object.defineProperty(ctx, style, {\n            set: function (value) {\n                if (style === 'textAlign') {\n                    value = TEXT_ALIGN_MAP[value] ? TEXT_ALIGN_MAP[value] : value;\n                }\n                var name = 'set' + CAPITALIZED_ATTRS_MAP[style];\n                ctx[name](value);\n            }\n        });\n        return style;\n    });\n});\n","\n// 支付宝小程序的context适配\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CAPITALIZED_ATTRS_MAP = {\n    fillStyle: 'FillStyle',\n    fontSize: 'FontSize',\n    globalAlpha: 'GlobalAlpha',\n    opacity: 'GlobalAlpha',\n    lineCap: 'LineCap',\n    lineJoin: 'LineJoin',\n    lineWidth: 'LineWidth',\n    miterLimit: 'MiterLimit',\n    strokeStyle: 'StrokeStyle',\n    textAlign: 'TextAlign',\n    textBaseline: 'TextBaseline',\n    shadow: 'Shadow',\n    font: 'Font'\n};\nfunction strLen(str) {\n    var len = 0;\n    for (var i = 0; i < str.length; i++) {\n        if (str.charCodeAt(i) > 0 && str.charCodeAt(i) < 128) {\n            len++;\n        }\n        else {\n            len += 2;\n        }\n    }\n    return len;\n}\nexports.default = (function (ctx) {\n    Object.keys(CAPITALIZED_ATTRS_MAP).map(function (key) {\n        Object.defineProperty(ctx, key, {\n            set: function (value) {\n                // 记录最新设置的值\n                ctx[\"__\" + key] = value;\n                if (key === 'shadow' && ctx.setShadow && Array.isArray(value)) {\n                    ctx.setShadow(value[0], value[1], value[2], value[3]);\n                    return;\n                }\n                var name = 'set' + CAPITALIZED_ATTRS_MAP[key];\n                if (!ctx[name]) {\n                    return;\n                }\n                ctx[name](value);\n            }\n        });\n        return key;\n    });\n    // 钉钉钉钉小程序框架不支持 measureText 方法，用此方法 mock\n    if (!ctx.measureText) {\n        ctx.measureText = function (text) {\n            var fontSize = 12;\n            var font = ctx.__font;\n            if (font) {\n                fontSize = parseInt(font.split(' ')[3], 10);\n            }\n            fontSize /= 2;\n            return {\n                width: strLen(text) * fontSize\n            };\n        };\n    }\n    return ctx;\n});\n","\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// weixin miniprogram\n// @ts-ignore\nvar isWx = (typeof wx === 'object') && (typeof wx.getSystemInfoSync === 'function');\nexports.isWx = isWx;\n// ant miniprogram\n// @ts-ignore\nvar isMy = (typeof my === 'object') && (typeof my.getSystemInfoSync === 'function');\nexports.isMy = isMy;\n"]}